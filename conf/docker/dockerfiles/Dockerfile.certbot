# Certbot Dockerfile
FROM certbot/certbot:latest

# Set environment variables
ENV DOMAIN_NAME=${DOMAIN_NAME:-localhost}
ENV EMAIL=${EMAIL:-admin@localhost}

# Create necessary directories
RUN mkdir -p /etc/letsencrypt /var/www/certbot

# Copy certbot configuration if needed
# COPY certbot/certbot.conf /etc/letsencrypt/cli.ini

# Health check
HEALTHCHECK --interval=300s --timeout=30s --start-period=60s --retries=3 \
  CMD certbot certificates --non-interactive --quiet || exit 1 